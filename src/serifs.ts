// ã›ã‚Šãµ

import { readFile } from 'fs/promises';
import * as TOML from '@iarna/toml';

const defaultSerifs = {
  core: {
    setNameOk: (name) => `ã‚ã‹ã‚Šã¾ã—ãŸã€‚ã“ã‚Œã‹ã‚‰ã¯${name}ã¨ãŠå‘¼ã³ã—ã¾ã™ã­ï¼`,

    san: 'ã•ã‚“ä»˜ã‘ã—ãŸæ–¹ãŒã„ã„ã§ã™ã‹ï¼Ÿ',

    yesOrNo: 'ã€Œã¯ã„ã€ã‹ã€Œã„ã„ãˆã€ã—ã‹ã‚ã‹ã‚‰ãªã„ã‚“ã§ã™...',

    hello: (name) => (name ? `ã“ã‚“ã«ã¡ã¯ã€${name}â™ª` : `ã“ã‚“ã«ã¡ã¯â™ª`),

    helloNight: (name) => (name ? `ã“ã‚“ã°ã‚“ã¯ã€${name}â™ª` : `ã“ã‚“ã°ã‚“ã¯â™ª`),

    goodMorning: (tension, name) =>
      name
        ? `ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ã€${name}ï¼${tension}`
        : `ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼${tension}`,

    /*
		goodMorning: {
			normal: (tension, name) => name ? `ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ã€${name}ï¼${tension}` : `ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼${tension}`,

			hiru: (tension, name) => name ? `ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ã€${name}ï¼${tension}ã‚‚ã†ãŠæ˜¼ã§ã™ã‚ˆï¼Ÿ${tension}` : `ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼${tension}ã‚‚ã†ãŠæ˜¼ã§ã™ã‚ˆï¼Ÿ${tension}`,
		},
*/

    goodNight: (name) =>
      name ? `ãŠã‚„ã™ã¿ãªã•ã„ã€${name}ï¼` : 'ãŠã‚„ã™ã¿ãªã•ã„ï¼',

    omedeto: (name) =>
      name ? `ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€${name}â™ª` : 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™â™ª',

    erait: {
      general: (name) =>
        name
          ? [`${name}ã€ä»Šæ—¥ã‚‚ãˆã‚‰ã„ã§ã™ï¼`, `${name}ã€ä»Šæ—¥ã‚‚ãˆã‚‰ã„ã§ã™ã‚ˆï½žâ™ª`]
          : [`ä»Šæ—¥ã‚‚ãˆã‚‰ã„ã§ã™ï¼`, `ä»Šæ—¥ã‚‚ãˆã‚‰ã„ã§ã™ã‚ˆï½žâ™ª`],

      specify: (thing, name) =>
        name
          ? [
              `${name}ã€${thing}ã¦ãˆã‚‰ã„ã§ã™ï¼`,
              `${name}ã€${thing}ã¦ãˆã‚‰ã„ã§ã™ã‚ˆï½žâ™ª`,
            ]
          : [`${thing}ã¦ãˆã‚‰ã„ã§ã™ï¼`, `${thing}ã¦ãˆã‚‰ã„ã§ã™ã‚ˆï½žâ™ª`],

      specify2: (thing, name) =>
        name
          ? [
              `${name}ã€${thing}ã§ãˆã‚‰ã„ã§ã™ï¼`,
              `${name}ã€${thing}ã§ãˆã‚‰ã„ã§ã™ã‚ˆï½žâ™ª`,
            ]
          : [`${thing}ã§ãˆã‚‰ã„ã§ã™ï¼`, `${thing}ã§ãˆã‚‰ã„ã§ã™ã‚ˆï½žâ™ª`],
    },

    okaeri: {
      love: (name) =>
        name
          ? [`ãŠã‹ãˆã‚Šãªã•ã„ã€${name}â™ª`, `ãŠã‹ãˆã‚Šãªã•ã„ã¾ã›ã£ã€${name}ã£ã€‚`]
          : ['ãŠã‹ãˆã‚Šãªã•ã„â™ª', 'ãŠã‹ãˆã‚Šãªã•ã„ã¾ã›ã£ã€ã”ä¸»äººæ§˜ã£ã€‚'],

      love2: (name) =>
        name
          ? `ãŠã‹ãˆã‚Šãªã•ã„ã¾ã›â™¡â™¡â™¡${name}ã£ã£â™¡â™¡â™¡â™¡â™¡`
          : 'ãŠã‹ãˆã‚Šãªã•ã„ã¾ã›â™¡â™¡â™¡ã”ä¸»äººæ§˜ã£ã£â™¡â™¡â™¡â™¡â™¡',

      normal: (name) =>
        name ? `ãŠã‹ãˆã‚Šãªã•ã„ã€${name}ï¼` : 'ãŠã‹ãˆã‚Šãªã•ã„ï¼',
    },

    itterassyai: {
      love: (name) =>
        name ? `ã„ã£ã¦ã‚‰ã£ã—ã‚ƒã„ã€${name}â™ª` : 'ã„ã£ã¦ã‚‰ã£ã—ã‚ƒã„â™ª',

      normal: (name) =>
        name ? `ã„ã£ã¦ã‚‰ã£ã—ã‚ƒã„ã€${name}ï¼` : 'ã„ã£ã¦ã‚‰ã£ã—ã‚ƒã„ï¼',
    },

    tooLong: 'é•·ã™ãŽã‚‹æ°—ãŒã—ã¾ã™...',

    invalidName: 'ç™ºéŸ³ãŒé›£ã—ã„æ°—ãŒã—ã¾ã™',

    nadenade: {
      normal: 'ã²ã‚ƒã£â€¦ï¼ ã³ã£ãã‚Šã—ã¾ã—ãŸ',

      love2: ['ã‚ã‚ã£â€¦ æ¥ãšã‹ã—ã„ã§ã™', 'ã‚ã†ã…â€¦ æ¥ãšã‹ã—ã„ã§ã™â€¦', 'ãµã‚„ãâ€¦ï¼Ÿ'],

      love3: [
        'ã‚“ã…â€¦ ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™â™ª',
        'ã‚ã£ã€ãªã‚“ã ã‹è½ã¡ç€ãã¾ã™ã­â™ª',
        'ãã…ã‚“ã£â€¦ å®‰å¿ƒã—ã¾ã™â€¦',
        'çœ ããªã£ã¦ãã¾ã—ãŸâ€¦',
      ],

      hate1: 'â€¦ã£ï¼ ã‚„ã‚ã¦ã»ã—ã„ã§ã™...',

      hate2: 'è§¦ã‚‰ãªã„ã§ãã ã•ã„',

      hate3: 'è¿‘å¯„ã‚‰ãªã„ã§ãã ã•ã„',

      hate4: 'ã‚„ã‚ã¦ãã ã•ã„ã€‚é€šå ±ã—ã¾ã™ã‚ˆï¼Ÿ',
    },

    kawaii: {
      normal: ['ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™â™ª', 'ç…§ã‚Œã¡ã‚ƒã„ã¾ã™...'],

      love: ['å¬‰ã—ã„ã§ã™â™ª', 'ç…§ã‚Œã¡ã‚ƒã„ã¾ã™...'],

      hate: 'â€¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™',
    },

    suki: {
      normal: 'ãˆã£â€¦ ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™â€¦â™ª',

      love: (name) => `ç§ã‚‚ãã®â€¦ ${name}ã®ã“ã¨å¥½ãã§ã™ã‚ˆï¼`,

      hate: null,
    },

    hug: {
      normal: 'ãŽã‚…ãƒ¼...',

      love: 'ãŽã‚…ãƒ¼ã£â™ª',

      hate: 'é›¢ã‚Œã¦ãã ã•ã„...',
    },

    humu: {
      love: 'ãˆã€ãˆã£ã¨â€¦â€¦ ãµã¿ãµã¿â€¦â€¦â€¦ ã©ã†ã§ã™ã‹â€¦ï¼Ÿ',

      normal: 'ãˆã‡... ãã‚Œã¯ã¡ã‚‡ã£ã¨...',

      hate: 'â€¦â€¦',
    },

    batou: {
      love: 'ãˆã£ã¨â€¦ã€ãŠã€ãŠãƒã‚«ã•ã‚“â€¦ï¼Ÿ',

      normal: '(ã˜ã¨ãƒ¼â€¦)',

      hate: 'â€¦é ­å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿ',
    },

    itai: (name) =>
      name
        ? `${name}ã€å¤§ä¸ˆå¤«ã§ã™ã‹â€¦ï¼Ÿ ã„ãŸã„ã®ã„ãŸã„ã®é£›ã‚“ã§ã‘ã£ï¼`
        : 'å¤§ä¸ˆå¤«ã§ã™ã‹â€¦ï¼Ÿ ã„ãŸã„ã®ã„ãŸã„ã®é£›ã‚“ã§ã‘ã£ï¼',

    ote: {
      normal: 'ãã…ã‚“... ç§ã‚ã‚“ã¡ã‚ƒã‚“ã˜ã‚ƒãªã„ã§ã™ã‚ˆ...ï¼Ÿ',

      love1: 'ã‚ã‚“ï¼',

      love2: 'ã‚ã‚“ã‚ã‚“â™ª',
    },

    shutdown: 'ç§ã¾ã çœ ããªã„ã§ã™ã‚ˆ...ï¼Ÿ',

    transferNeedDm: 'ã‚ã‹ã‚Šã¾ã—ãŸã€ãã‚Œã¯ãƒãƒ£ãƒƒãƒˆã§è©±ã—ã¾ã›ã‚“ã‹ï¼Ÿ',

    transferCode: (code) => `ã‚ã‹ã‚Šã¾ã—ãŸã€‚\nåˆè¨€è‘‰ã¯ã€Œ${code}ã€ã§ã™ï¼`,

    transferFailed: 'ã†ãƒ¼ã‚“ã€åˆè¨€è‘‰ãŒé–“é•ã£ã¦ã¾ã›ã‚“ã‹...ï¼Ÿ',

    transferDone: (name) =>
      name
        ? `ã¯ã£...ï¼ ãŠã‹ãˆã‚Šãªã•ã„ã€${name}ï¼`
        : `ã¯ã£...ï¼ ãŠã‹ãˆã‚Šãªã•ã„ï¼`,
  },

  keyword: {
    learned: (word, reading) => `(${word}..... ${reading}..... è¦šãˆã¾ã—ãŸ)`,

    remembered: (word) => `${word}`,
  },

  dice: {
    done: (res) => `${res} ã§ã™ï¼`,
  },

  birthday: {
    happyBirthday: (name) =>
      name
        ? `ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ã€${name}ðŸŽ‰`
        : 'ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ðŸŽ‰',
  },

  /**
   * ãƒªãƒãƒ¼ã‚·
   */
  reversi: {
    /**
     * ãƒªãƒãƒ¼ã‚·ã¸ã®èª˜ã„ã‚’æ‰¿è«¾ã™ã‚‹ã¨ã
     */
    ok: 'è‰¯ã„ã§ã™ã‚ˆï½ž',

    /**
     * ãƒªãƒãƒ¼ã‚·ã¸ã®èª˜ã„ã‚’æ–­ã‚‹ã¨ã
     */
    decline: 'ã”ã‚ã‚“ãªã•ã„ã€ä»Šãƒªãƒãƒ¼ã‚·ã¯ã™ã‚‹ãªã¨è¨€ã‚ã‚Œã¦ã¾ã™...',

    /**
     * å¯¾å±€é–‹å§‹
     */
    started: (name, strength) =>
      `å¯¾å±€ã‚’${name}ã¨å§‹ã‚ã¾ã—ãŸï¼ (å¼·ã•${strength})`,

    /**
     * æŽ¥å¾…é–‹å§‹
     */
    startedSettai: (name) => `(${name}ã®æŽ¥å¾…ã‚’å§‹ã‚ã¾ã—ãŸ)`,

    /**
     * å‹ã£ãŸã¨ã
     */
    iWon: (name) => `${name}ã«å‹ã¡ã¾ã—ãŸâ™ª`,

    /**
     * æŽ¥å¾…ã®ã¤ã‚‚ã‚ŠãŒå‹ã£ã¦ã—ã¾ã£ãŸã¨ã
     */
    iWonButSettai: (name) => `(${name}ã«æŽ¥å¾…ã§å‹ã£ã¡ã‚ƒã„ã¾ã—ãŸ...)`,

    /**
     * è² ã‘ãŸã¨ã
     */
    iLose: (name) => `${name}ã«è² ã‘ã¾ã—ãŸ...`,

    /**
     * æŽ¥å¾…ã§è² ã‘ã¦ã‚ã’ãŸã¨ã
     */
    iLoseButSettai: (name) => `(${name}ã«æŽ¥å¾…ã§è² ã‘ã¦ã‚ã’ã¾ã—ãŸ...â™ª)`,

    /**
     * å¼•ãåˆ†ã‘ãŸã¨ã
     */
    drawn: (name) => `${name}ã¨å¼•ãåˆ†ã‘ã¾ã—ãŸï½ž`,

    /**
     * æŽ¥å¾…ã§å¼•ãåˆ†ã‘ãŸã¨ã
     */
    drawnSettai: (name) => `(${name}ã«æŽ¥å¾…ã§å¼•ãåˆ†ã‘ã¾ã—ãŸ...)`,

    /**
     * ç›¸æ‰‹ãŒæŠ•äº†ã—ãŸã¨ã
     */
    youSurrendered: (name) => `${name}ãŒæŠ•äº†ã—ã¡ã‚ƒã„ã¾ã—ãŸ`,

    /**
     * æŽ¥å¾…ã—ã¦ãŸã‚‰ç›¸æ‰‹ãŒæŠ•äº†ã—ãŸã¨ã
     */
    settaiButYouSurrendered: (name) =>
      `(${name}ã‚’æŽ¥å¾…ã—ã¦ã„ãŸã‚‰æŠ•äº†ã•ã‚Œã¡ã‚ƒã„ã¾ã—ãŸ... ã”ã‚ã‚“ãªã•ã„)`,
  },

  /**
   * æ•°å½“ã¦ã‚²ãƒ¼ãƒ 
   */
  guessingGame: {
    /**
     * ã‚„ã‚ã†ã¨è¨€ã‚ã‚ŒãŸã‘ã©æ—¢ã«ã‚„ã£ã¦ã„ã‚‹ã¨ã
     */
    alreadyStarted: 'ãˆã€ã‚²ãƒ¼ãƒ ã¯æ—¢ã«å§‹ã¾ã£ã¦ã¾ã™ã‚ˆï¼',

    /**
     * ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ä¸Šã§èª˜ã‚ã‚ŒãŸã¨ã
     */
    plzDm: 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚„ã‚Šã¾ã—ã‚‡ã†ï¼',

    /**
     * ã‚²ãƒ¼ãƒ é–‹å§‹
     */
    started: '0~100ã®ç§˜å¯†ã®æ•°ã‚’å½“ã¦ã¦ã¿ã¦ãã ã•ã„â™ª',

    /**
     * æ•°å­—ã˜ã‚ƒãªã„è¿”ä¿¡ãŒã‚ã£ãŸã¨ã
     */
    nan: 'æ•°å­—ã§ãŠé¡˜ã„ã—ã¾ã™ï¼ã€Œã‚„ã‚ã‚‹ã€ã¨è¨€ã£ã¦ã‚²ãƒ¼ãƒ ã‚’ã‚„ã‚ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã‚ˆï¼',

    /**
     * ä¸­æ­¢ã‚’è¦æ±‚ã•ã‚ŒãŸã¨ã
     */
    cancel: 'ã‚ã‹ã‚Šã¾ã—ãŸï½žã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸâ™ª',

    /**
     * å°ã•ã„æ•°ã‚’è¨€ã‚ã‚ŒãŸã¨ã
     */
    grater: (num) => `${num}ã‚ˆã‚Šå¤§ãã„ã§ã™ã­`,

    /**
     * å°ã•ã„æ•°ã‚’è¨€ã‚ã‚ŒãŸã¨ã(2åº¦ç›®)
     */
    graterAgain: (num) => `ã‚‚ã†ä¸€åº¦è¨€ã„ã¾ã™ãŒ${num}ã‚ˆã‚Šå¤§ãã„ã§ã™ã‚ˆï¼`,

    /**
     * å¤§ãã„æ•°ã‚’è¨€ã‚ã‚ŒãŸã¨ã
     */
    less: (num) => `${num}ã‚ˆã‚Šå°ã•ã„ã§ã™ã­`,

    /**
     * å¤§ãã„æ•°ã‚’è¨€ã‚ã‚ŒãŸã¨ã(2åº¦ç›®)
     */
    lessAgain: (num) => `ã‚‚ã†ä¸€åº¦è¨€ã„ã¾ã™ãŒ${num}ã‚ˆã‚Šå°ã•ã„ã§ã™ã‚ˆï¼`,

    /**
     * æ­£è§£ã—ãŸã¨ã
     */
    congrats: (tries) => `æ­£è§£ã§ã™ðŸŽ‰ (${tries}å›žç›®ã§å½“ã¦ã¾ã—ãŸ)`,
  },

  /**
   * æ•°å–ã‚Šã‚²ãƒ¼ãƒ 
   */
  kazutori: {
    alreadyStarted: 'ä»Šã¡ã‚‡ã†ã©ã‚„ã£ã¦ã¾ã™ã‚ˆï½ž',

    matakondo: 'ã¾ãŸä»Šåº¦ã‚„ã‚Šã¾ã—ã‚‡ã†ï¼',

    intro: (minutes) =>
      `ã¿ãªã•ã‚“ã€æ•°å–ã‚Šã‚²ãƒ¼ãƒ ã—ã¾ã—ã‚‡ã†ï¼\n0~100ã®ä¸­ã§æœ€ã‚‚å¤§ãã„æ•°å­—ã‚’å–ã£ãŸäººãŒå‹ã¡ã§ã™ã€‚ä»–ã®äººã¨è¢«ã£ãŸã‚‰ã ã‚ã§ã™ã‚ˆï½ž\nåˆ¶é™æ™‚é–“ã¯${minutes}åˆ†ã§ã™ã€‚æ•°å­—ã¯ã“ã®æŠ•ç¨¿ã«ãƒªãƒ—ãƒ©ã‚¤ã§é€ã£ã¦ãã ã•ã„ã­ï¼`,

    finish: 'ã‚²ãƒ¼ãƒ ã®çµæžœç™ºè¡¨ã§ã™ï¼',

    finishWithWinner: (user, name) =>
      name
        ? `ä»Šå›žã¯${user}ã•ã‚“(${name})ã®å‹ã¡ã§ã™ï¼ã¾ãŸã‚„ã‚Šã¾ã—ã‚‡ã†â™ª`
        : `ä»Šå›žã¯${user}ã•ã‚“ã®å‹ã¡ã§ã™ï¼ã¾ãŸã‚„ã‚Šã¾ã—ã‚‡ã†â™ª`,

    finishWithNoWinner: 'ä»Šå›žã¯å‹è€…ã¯ã„ã¾ã›ã‚“ã§ã—ãŸ... ã¾ãŸã‚„ã‚Šã¾ã—ã‚‡ã†â™ª',

    onagare: 'å‚åŠ è€…ãŒé›†ã¾ã‚‰ãªã‹ã£ãŸã®ã§ãŠæµã‚Œã«ãªã‚Šã¾ã—ãŸ...',
  },

  /**
   * çµµæ–‡å­—ç”Ÿæˆ
   */
  emoji: {
    suggest: (emoji) => `ã“ã‚“ãªã®ã¯ã©ã†ã§ã™ã‹ï¼Ÿâ†’${emoji}`,
  },

  /**
   * å ã„
   */
  fortune: {
    cw: (name) =>
      name
        ? `ç§ãŒä»Šæ—¥ã®${name}ã®é‹å‹¢ã‚’å ã„ã¾ã—ãŸ...`
        : 'ç§ãŒä»Šæ—¥ã®ã‚ãªãŸã®é‹å‹¢ã‚’å ã„ã¾ã—ãŸ...',
  },

  /**
   * ã‚¿ã‚¤ãƒžãƒ¼
   */
  timer: {
    set: 'ã‚ã‹ã‚Šã¾ã—ãŸï¼',

    invalid: 'ã†ãƒ¼ã‚“...ï¼Ÿ',

    tooLong: 'é•·ã™ãŽã¾ã™â€¦',

    notify: (time, name) =>
      name ? `${name}ã€${time}çµŒã¡ã¾ã—ãŸã‚ˆï¼` : `${time}çµŒã¡ã¾ã—ãŸã‚ˆï¼`,
  },

  /**
   * ãƒªãƒžã‚¤ãƒ³ãƒ€ãƒ¼
   */
  reminder: {
    invalid: 'ã†ãƒ¼ã‚“...ï¼Ÿ',

    doneFromInvalidUser: 'ã‚¤ã‚¿ã‚ºãƒ©ã¯ã‚ã£ã§ã™ã‚ˆï¼',

    reminds: 'ã‚„ã‚‹ã“ã¨ä¸€è¦§ã§ã™ï¼',

    notify: (name) =>
      name ? `${name}ã€ã“ã‚Œã‚„ã‚Šã¾ã—ãŸã‹ï¼Ÿ` : `ã“ã‚Œã‚„ã‚Šã¾ã—ãŸã‹ï¼Ÿ`,

    notifyWithThing: (thing, name) =>
      name
        ? `${name}ã€ã€Œ${thing}ã€ã‚„ã‚Šã¾ã—ãŸã‹ï¼Ÿ`
        : `ã€Œ${thing}ã€ã‚„ã‚Šã¾ã—ãŸã‹ï¼Ÿ`,

    done: (name) =>
      name
        ? [
            `ã‚ˆãå‡ºæ¥ã¾ã—ãŸã€${name}â™ª`,
            `${name}ã€ã•ã™ãŒã§ã™ã£ï¼`,
            `${name}ã€ãˆã‚‰ã™ãŽã¾ã™...ï¼`,
          ]
        : [`ã‚ˆãå‡ºæ¥ã¾ã—ãŸâ™ª`, `ã•ã™ãŒã§ã™ã£ï¼`, `ãˆã‚‰ã™ãŽã¾ã™...ï¼`],

    cancel: `ã‚ã‹ã‚Šã¾ã—ãŸã€‚`,
  },

  /**
   * ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³
   */
  valentine: {
    chocolateForYou: (name) =>
      name
        ? `${name}ã€ãã®... ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆä½œã£ãŸã®ã§ã‚ˆã‹ã£ãŸã‚‰ã©ã†ãžï¼ðŸ«`
        : 'ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆä½œã£ãŸã®ã§ã‚ˆã‹ã£ãŸã‚‰ã©ã†ãžï¼ðŸ«',
  },

  server: {
    cpu: 'ã‚µãƒ¼ãƒãƒ¼ã®è² è·ãŒé«˜ãã†ã§ã™ã€‚å¤§ä¸ˆå¤«ã§ã—ã‚‡ã†ã‹...ï¼Ÿ',
  },

  maze: {
    post: 'ä»Šæ—¥ã®è¿·è·¯ã§ã™ï¼ #AiMaze',
    foryou: 'æãã¾ã—ãŸï¼',
  },

  chart: {
    post: 'ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®æŠ•ç¨¿æ•°ã§ã™ï¼',
    foryou: 'æãã¾ã—ãŸï¼',
  },

  checkCustomEmojis: {
    post: (server_name, num) =>
      `${server_name}ã«${num}ä»¶ã®çµµæ–‡å­—ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸï¼`,
    emojiPost: (emoji) => `:${emoji}:\n(\`${emoji}\`) #AddCustomEmojis`,
    postOnce: (server_name, num, text) =>
      `${server_name}ã«${num}ä»¶ã®çµµæ–‡å­—ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸï¼\n${text} #AddCustomEmojis`,
    emojiOnce: (emoji) => `:${emoji}:(\`${emoji}\`)`,
  },

  aichat: {
    nothing: (type) => `ã‚ã…... ${type}ã®APIã‚­ãƒ¼ãŒç™»éŒ²ã•ã‚Œã¦ãªã„ã¿ãŸã„ã§ã™`,
    error: (type, errorCode = null, errorMessage = null) =>
      errorCode
        ? `ã†ã‡...${type}ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¡ã‚ƒã£ãŸã¿ãŸã„ã§ã™ã€‚\nã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰: ${errorCode}\nã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ${errorMessage}`
        : `ã†ã‡...${type}ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¡ã‚ƒã£ãŸã¿ãŸã„ã§ã™ã€‚`,
    post: (text) => `${text} #aichat`,
  },

  follow: {
    success: {
      follow: (userDisplay) => `âœ… ${userDisplay}ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¾ã—ãŸ`,
      unfollow: (userDisplay) => `âœ… ${userDisplay}ã®ãƒ•ã‚©ãƒ­ãƒ¼è§£é™¤ã—ã¾ã—ãŸ`,
    },
    error: {
      userNotFound: (userDisplay) =>
        `âš ï¸ ãƒ¦ãƒ¼ã‚¶ãƒ¼ ${userDisplay} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`,
      apiFailed: (userDisplay, action) =>
        `âŒ ${userDisplay}ã®${action}ã«å¤±æ•—ã—ã¾ã—ãŸ`,
      permissionDenied: 'ã©ãªãŸã•ã¾ã§ã™ã‹ï¼Ÿ',
    },
  },

  sleepReport: {
    report: (hours) => `ã‚“ã…ã€${hours}æ™‚é–“ãã‚‰ã„å¯ã¡ã‚ƒã£ã¦ãŸã¿ãŸã„ã§ã™`,
    reportUtatane: 'ã‚“... ã†ãŸãŸå¯ã—ã¡ã‚ƒã£ã¦ã¾ã—ãŸ',
  },

  noting: {
    notes: [
      'ã‚´ãƒ­ã‚´ãƒ­â€¦',
      'ã¡ã‚‡ã£ã¨çœ ã„ã§ã™',
      'ã„ã„ã§ã™ã‚ˆï¼Ÿ',
      '(ã€‚Â´ï½¥Ï‰ï½¥)?',
      'ãµã‡ãƒ¼',
      'ã‚ã‚Œâ€¦ã“ã‚Œã‚’ã“ã†ã—ã¦â€¦ã‚ã‚Œãƒ¼ï¼Ÿ',
      'ã¼ãƒ¼â€¦',
      'ãµã…â€¦ç–²ã‚Œã¾ã—ãŸ',
      'ãŠå‘³å™Œæ±ã€ä½œã‚Šã¾ã—ã‚‡ã†ã‹ï¼Ÿ',
      'ã”é£¯ã«ã—ã¾ã™ã‹ï¼ŸãŠé¢¨å‘‚ã«ã—ã¾ã™ã‹ï¼Ÿ',
      'ãµãˆãˆãˆãˆãˆï¼ï¼Ÿ',
      'ç§ã®ã‚µã‚¤ãƒˆã«ã€ç§ã®ã‚¤ãƒ©ã‚¹ãƒˆãŒãŸãã•ã‚“ã‚ã£ã¦å¬‰ã—ã„ã§ã™ï¼',
      'ã¿ã™ããƒ¼ã£ã¦ã€ã‹ã‚ã„ã„åå‰ã§ã™ã‚ˆã­ï¼',
      'ã†ã…ã€ãƒªãƒãƒ¼ã‚·é›£ã—ã„ãªãâ€¦',
      'å¤±æ•—ã—ã¦ã‚‚ã€æ¬¡ã«æ´»ã‹ã›ãŸã‚‰ãƒ—ãƒ©ã‚¹ã§ã™ã‚ˆã­ï¼',
      'ãªã‚“ã ã‹ã€ãŠãªã‹ç©ºã„ã¡ã‚ƒã„ã¾ã—ãŸ',
      'ãŠæŽƒé™¤ã¯ã€å®šæœŸçš„ã«ã—ãªã„ã¨ãƒ€ãƒ¡ã§ã™ã‚ˆãƒ¼ï¼Ÿ',
      'ä»Šæ—¥ã‚‚ãŠå‹¤ã‚ã”è‹¦åŠ´æ§˜ã§ã™ï¼ ç§ã‚‚é ‘å¼µã‚Šã¾ã™â™ª',
      'ãˆã£ã¨ã€ä½•ã—ã‚ˆã†ã¨ã—ã¦ãŸã‚“ã ã£ã‘â€¦ï¼Ÿ',
      'ãŠã†ã¡ãŒã„ã¡ã°ã‚“ã€è½ã¡ç€ãã¾ã™â€¦',
      'ç–²ã‚ŒãŸã‚‰ã€ç§ãŒãªã§ãªã§ã£ã¦ã—ã¦ã‚ã’ã¾ã™â™ª',
      'é›¢ã‚Œã¦ã„ã¦ã‚‚ã€å¿ƒã¯ãã°ã«ã„ã¾ã™â™ª',
      'è—ã§ã™ã‚ˆã€œ',
      'ã‚ã‚“ã¡ã‚ƒã‚“å¯æ„›ã„ã§ã™',
      'ã·ã‚ãã‚‰ã‚€ï¼Ÿ',
      'ã”ã‚ãƒ¼ã‚“â€¦',
      'ãªã«ã‚‚ã—ã¦ã„ãªã„ã®ã«ã€ãƒ‘ã‚½ã‚³ãƒ³ãŒå£Šã‚Œã¡ã‚ƒã„ã¾ã—ãŸâ€¦',
      'Have a nice dayâ™ª',
      'ãŠå¸ƒå›£ã«é£Ÿã¹ã‚‰ã‚Œã¡ã‚ƒã£ã¦ã¾ã™',
      'å¯ãªãŒã‚‰è¦‹ã¦ã¾ã™',
      'å¿µåŠ›ã§æ“ä½œã—ã¦ã¾ã™',
      'ä»®æƒ³ç©ºé–“ã‹ã‚‰æŠ•ç¨¿ã—ã¦ã¾ã™',
      'ä»Šæ—¥ã¯Misskeyæœ¬éƒ¨ã«æ¥ã¦ã¾ã™ï¼',
      'Misskeyæœ¬éƒ¨ã¯ã€Zåœ°åŒºã®ç¬¬ä¸‰ã‚»ã‚¯ã‚¿ãƒ¼ã«ã‚ã‚Šã¾ã™',
      'Misskeyæœ¬éƒ¨ã«ã¯ã€ã•ãƒ¼ã°ãƒ¼ã£ã¦ã„ã†æ©Ÿæ¢°ãŒã„ã£ã±ã„ã‚ã‚Šã¾ã™',
      'ã—ã£ã½ã¯ãªã„ã§ã™ã‚ˆï¼Ÿ',
      'ã²ã‚ƒã£â€¦ï¼\nãƒã‚³ãƒŸãƒŸè§¦ã‚‰ã‚Œã‚‹ã¨ã€ãã™ãã£ãŸã„ã§ã™',
      'æŠ—é€†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ€§ã£ã¦ã€ãªã«ã‹ãªï¼Ÿ',
      'Misskeyã®åˆ¶æœã€ã‹ã‚ã„ãã¦å¥½ãã§ã™â™ª',
      'ãµã‚ãã€ãŠãµã¨ã‚“æ°—æŒã¡ã„ã„ã§ã™...',
      'ãƒ¡ã‚¤ãƒ‰æœã€ä¼¼åˆã†ã‹ãªï¼Ÿ',
      'æŒ¨æ‹¶ãŒã§ãã‚‹äººé–“ã¯é–‹ç™ºã‚‚ã§ãã‚‹ï¼â€¦ã£ã¦ã€syuiloã•ã‚“ãŒè¨€ã£ã¦ã¾ã—ãŸ',
      'ãµãˆã‡ã€ã”ä¸»äººæ§˜ã©ã“è¦‹ã¦ã‚‹ã‚“ã§ã™ã‹ï¼Ÿ',
      'ç§ã‚’è¦—ãã¨ãã€ç§ã‚‚ã¾ãŸã”ä¸»äººæ§˜ã‚’è¦—ã„ã¦ã„ã¾ã™',
      'ã¯ã„ã€ãƒžãƒžã§ã™ã‚ˆã€œ',
      'ãã…ï½žã‚“...',
      'All your note are belong to me!',
      'ã›ã£ã‹ãã ã‹ã‚‰ã€ç§ã¯ã“ã®èµ¤ã®æ‰‰ã‚’é¸ã³ã¾ã™ï¼',
      'ã‚ˆã—ã£',
      '( Ë˜Ï‰Ë˜)ï½½ï¾”ï½§',
      '(ï½€ãƒ»Ï‰ãƒ»Â´)ï½¼ï½¬ï½·ï½°ï¾',
      'å¤±ç¤¼ã€ã‹ã¿ã¾ã¿ãŸ',
      'ãŠã¯ã‚ˆã†ã‹ã‚‰ãŠã‚„ã™ã¿ã¾ã§ã€ã‚ãªãŸã®è—ã§ã™ã‚ˆã€œ',
      'Misskeyé–‹ç™ºè€…ã®æœã¯é…ã„ã‚‰ã—ã„ã§ã™',
      'ã®ã€ã®ã˜ã‚ƒ...',
      'ã«ã‚ƒã‚“ã«ã‚ƒã‚“ãŠï¼',
      'ä¸Šã‹ã‚‰æ¥ã¾ã™ï¼æ°—ã‚’ã¤ã‘ã¦ãã ã•ã„ï¼',
      'ãµã‚ã...',
      'ã‚ã…',
      'ãµã¿ã‚ƒã€œ',
      'ãµãâ€¦ ã­ã‚€ã­ã‚€ã§ã™ãƒ¼',
      'ãƒ¾(à¹‘â•¹â—¡â•¹)ï¾‰"',
      'ç§ã®"ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹"ã‚’å‘¨å›²ã«å±•é–‹ã—ã¦åˆ†èº«ã™ã‚‹ã®ãŒç‰¹æŠ€ã§ã™ï¼\näººæ•°åˆ†ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼æ¶ˆè²»ãŒã‚ã‚‹ã®ã§ã€4äººãã‚‰ã„ãŒé™ç•Œã§ã™ã‘ã©',
      'ã†ã¨ã†ã¨...',
      'ãµã‚ãƒ¼ã€ãƒ¡ãƒ¢ãƒªãŒäº”è‡“å…­è…‘ã«æŸ“ã¿æ¸¡ã‚Šã¾ã™â€¦',
      'i pwned you!',
      'ã²ã‚‡ã“ã£',
      'ã«ã‚ƒã‚“â™ª',
      '(*>Ï‰<*)',
      'ã«ã“ãƒ¼â™ª',
      'ã·ããƒ¼',
      'ã«ã‚ƒãµã…',
      'è—ãŒæ¥ã¾ã—ãŸã‚ˆï½ž',
      'ã˜ãƒ¼',
      'ã¯ã«ã‚ƒï¼Ÿ',
    ],
    want: (item) => `${item}ã€æ¬²ã—ã„ãªã...`,
    see: (item) => `ãŠæ•£æ­©ã—ã¦ã„ãŸã‚‰ã€é“ã«${item}ãŒè½ã¡ã¦ã„ã‚‹ã®ã‚’è¦‹ãŸã‚“ã§ã™ï¼`,
    expire: (item) => `æ°—ã¥ã„ãŸã‚‰ã€${item}ã®è³žå‘³æœŸé™ãŒåˆ‡ã‚Œã¦ã¾ã—ãŸâ€¦`,
  },

  /**
   * å¤©æ°—äºˆå ±ï¼ˆå¼•æ•°ã‚’å—ã‘ã¦æ–‡å­—åˆ—ã‚’è¿”ã™é–¢æ•°å½¢å¼ï¼‰
   */
  weather: {
    forecast: (place, dateLabel, telop, tempStr, rainStr) =>
      `${place}ã®${dateLabel}ã®ãŠå¤©æ°—ã¯ã€Œ${telop}ã€ã¿ãŸã„ã§ã™ã‚ˆï¼${tempStr}${rainStr}\nä»Šæ—¥ã‚‚ç´ æ•µãªä¸€æ—¥ã«ãªã‚Šã¾ã™ã‚ˆã†ã«â™ª`,
    notFound: (place) =>
      `ã”ã‚ã‚“ãªã•ã„ã€ã€Œ${place}ã€ã®å¤©æ°—äºˆå ±ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸâ€¦\nã‚‚ã†ä¸€åº¦åœ°åã‚’ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã­ã€‚`,
    fetchError:
      'ã†ã…â€¦å¤©æ°—ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¡ã‚ƒã„ã¾ã—ãŸã€‚ã¾ãŸå¾Œã§è©¦ã—ã¦ã¿ã¦ãã ã•ã„â€¦',
    areaError: 'åœ°åŸŸãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¡ã‚ƒã„ã¾ã—ãŸã€‚ã”ã‚ã‚“ãªã•ã„â€¦',
    noTemp: 'ä»Šæ—¥ã¯æ°—æ¸©ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã”ã‚ã‚“ãªã•ã„â€¦',
    autoNote: {
      sunny: 'ä»Šæ—¥ã¯ã„ã„å¤©æ°—ã§ã™ã­ï¼',
      cloudy: 'ä»Šæ—¥ã¯ã¡ã‚‡ã£ã¨æ›‡ã‚Šç©ºã§ã™ã€‚',
      rainy: 'å‚˜ãŒå¿…è¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼',
      snowy: 'ä»Šæ—¥ã¯é›ªãŒé™ã‚Šãã†ã§ã™ã€‚ã‚ãŸãŸã‹ãã—ã¦ãã ã•ã„ã­ï¼',
      thunder: 'é›·ã«æ°—ã‚’ã¤ã‘ã¦ãã ã•ã„ã­ï¼',
      other: 'ä»Šæ—¥ã‚‚ä¸€æ—¥ãŒã‚“ã°ã‚Šã¾ã—ã‚‡ã†â™ª',
    },
  },

  /**
   * æ™‚å ±
   */
  timeSignal: {
    changeDate: (today: string, leftDays: number, percentage: number) =>
      `${today} ã«ãªã£ãŸã‚ˆï¼\nä»Šå¹´ã¯æ®‹ã‚Š${leftDays}æ—¥ã€ã‚ã¨${percentage}%ã ã‚ˆï¼`,
  },
};

function getParamNames(func: Function): string[] {
  const funcStr = func.toString();
  // é€šå¸¸ã®é–¢æ•°ã¨ã‚¢ãƒ­ãƒ¼é–¢æ•°ã®å¼•æ•°éƒ¨åˆ†ã‚’æŠ½å‡º
  const paramMatch = funcStr.match(
    /^(?:function\s*[^(]*\(([^)]*)\)|\(([^)]*)\)\s*=>|([^\s=]+)\s*=>)/
  );
  if (!paramMatch) return [];
  const paramsPart = paramMatch[1] || paramMatch[2] || paramMatch[3];
  return paramsPart
    .split(',')
    .map((p) => p.trim())
    .filter((p) => p);
}

function deepMerge(target: any, source: any, parentKey: string = ''): any {
  for (const key in source) {
    if (parentKey === 'noting' && key === 'notes') {
      target[key] = source[key];
      continue;
    }
    if (typeof target[key] === 'function' && typeof source[key] === 'string') {
      const originalFunc = target[key];
      const paramNames = getParamNames(originalFunc);
      const overrideString = source[key];

      target[key] = (...args: any[]) => {
        const params: { [key: string]: any } = {};

        // å¼•æ•°ãŒ1ã¤ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆï¼ˆä¾‹ï¼š({name, tension}ï¼‰ã¯ãã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å±•é–‹
        if (
          args.length === 1 &&
          typeof args[0] === 'object' &&
          !Array.isArray(args[0])
        ) {
          Object.assign(params, args[0]);
        } else {
          // é€šå¸¸ã®å¼•æ•°ã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åã«ãƒžãƒƒãƒ”ãƒ³ã‚°
          paramNames.forEach((paramName, index) => {
            params[paramName] = args[index];
          });
        }

        return overrideString.replace(/{(\w+)}/g, (_, placeholder) =>
          params.hasOwnProperty(placeholder)
            ? params[placeholder]
            : `{${placeholder}}`
        );
      };
    } else if (
      source[key] &&
      typeof source[key] === 'object' &&
      !Array.isArray(source[key])
    ) {
      target[key] = deepMerge(target[key] || {}, source[key], key);
    } else {
      target[key] = source[key];
    }
  }
  return target;
}

let computedSerifs = { ...defaultSerifs };
try {
  const fileContent = await readFile(
    new URL('../serifs.toml', import.meta.url),
    'utf8'
  );
  const loadedSerifs = TOML.parse(fileContent);
  if (loadedSerifs && typeof loadedSerifs === 'object') {
    computedSerifs = deepMerge(computedSerifs, loadedSerifs);
  }
} catch (e) {
  // Fallback to defaultSerifs if serifs.toml is missing or invalid
}

export default computedSerifs;

export function getSerif(variant: string | string[]): string {
  if (Array.isArray(variant)) {
    return variant[Math.floor(Math.random() * variant.length)];
  } else {
    return variant;
  }
}
